<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Diagrams - Product Recommendation System</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .diagram-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            padding: 20px;
            overflow: auto;
        }
        .diagram-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #34495e;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>System Architecture & Design Diagrams</h1>

        <div class="diagram-card">
            <div class="diagram-title">1. System Architecture</div>
            <div class="mermaid">
graph TB
    subgraph "Client Layer"
        Browser[Web Browser]
    end

    subgraph "Application Layer"
        Flask[Flask Web Server]
        Auth[Auth Module]
        Routes[API Routes]
        RecEngine[Recommendation Engine]
    end

    subgraph "Data Layer"
        MySQL[(MySQL Database)]
        ModelStore[Model Storage]
    end

    subgraph "ML Pipeline"
        DataLoad[Data Loader]
        Preprocess[Preprocessing]
        Train[Model Training]
        Eval[Evaluation]
    end

    Browser -- "HTTP Requests" --> Flask
    Flask -- "Authentication" --> Auth
    Flask -- "Routing" --> Routes
    Routes -- "Query Data" --> MySQL
    Routes -- "Get Recommendations" --> RecEngine
    RecEngine -- "Load Model" --> ModelStore
    
    DataLoad -- "Raw Data" --> Preprocess
    Preprocess -- "Clean Data" --> Train
    Train -- "Trained Model" --> ModelStore
    Train -- "Metrics" --> Eval
            </div>
        </div>

        <div class="diagram-card">
            <div class="diagram-title">2. Workflow Diagram</div>
            <div class="mermaid">
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database
    participant RecModel

    User->>Frontend: Access Home Page
    Frontend->>Backend: GET /
    Backend->>Database: Fetch Popular Products
    Database-->>Backend: Return Products
    Backend-->>Frontend: Render Home Page
    
    User->>Frontend: Login(username, password)
    Frontend->>Backend: POST /login
    Backend->>Database: Validate Credentials
    Database-->>Backend: User Valid
    Backend-->>Frontend: Redirect to Dashboard
    
    User->>Frontend: View Product(id)
    Frontend->>Backend: GET /product/<id>
    Backend->>Database: Get Product Details
    Database-->>Backend: Product Info
    Backend->>RecModel: Get Recommendations(id)
    RecModel-->>Backend: List of Similar Products
    Backend-->>Frontend: Render Product Page with Recs
            </div>
        </div>

        <div class="diagram-card">
            <div class="diagram-title">3. Use Case Diagram</div>
            <div class="mermaid">
usecaseDiagram
    actor "Registered User" as User
    actor "System Admin" as Admin
    
    package "Product Recommendation System" {
        usecase "Browse Products" as UC1
        usecase "Search Products" as UC2
        usecase "View Product Details" as UC3
        usecase "Get Personalized\nRecommendations" as UC4
        usecase "Login/Signup" as UC5
        usecase "View Dashboard" as UC6
        usecase "Manage Data Pipeline" as UC7
        usecase "Retrain Models" as UC8
    }

    User --> UC1
    User --> UC2
    User --> UC3
    User --> UC4
    User --> UC5
    User --> UC6

    Admin --> UC5
    Admin --> UC7
    Admin --> UC8
            </div>
        </div>
    </div>
</body>
</html>
